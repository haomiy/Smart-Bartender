

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>usocket – socket module &mdash; MicroPython 1.9.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
  

  
    <link rel="top" title="MicroPython 1.9.4 documentation" href="../index.html"/>
        <link rel="up" title="MicroPython libraries" href="index.html"/>
        <link rel="next" title="ustruct – pack and unpack primitive data types" href="ustruct.html"/>
        <link rel="prev" title="uselect – wait for events on a set of streams" href="uselect.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MicroPython
          

          
            
            <img src="../_static/web-logo-sticky.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.9.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/general.html">General information about the openmvcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/tutorial/index.html">OpenMV Cam Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="builtins.html">Builtin functions and exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html"><code class="docutils literal"><span class="pre">array</span></code> &#8211; arrays of numeric data</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmath.html"><code class="docutils literal"><span class="pre">cmath</span></code> &#8211; mathematical functions for complex numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="gc.html"><code class="docutils literal"><span class="pre">gc</span></code> &#8211; control the garbage collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="math.html"><code class="docutils literal"><span class="pre">math</span></code> &#8211; mathematical functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="sys.html"><code class="docutils literal"><span class="pre">sys</span></code> &#8211; system specific functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ubinascii.html"><code class="docutils literal"><span class="pre">ubinascii</span></code> &#8211; binary/ASCII conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ucollections.html"><code class="docutils literal"><span class="pre">ucollections</span></code> &#8211; collection and container types</a></li>
<li class="toctree-l3"><a class="reference internal" href="uerrno.html"><code class="docutils literal"><span class="pre">uerrno</span></code> &#8211; system error codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="uhashlib.html"><code class="docutils literal"><span class="pre">uhashlib</span></code> &#8211; hashing algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="uheapq.html"><code class="docutils literal"><span class="pre">uheapq</span></code> &#8211; heap queue algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="uio.html"><code class="docutils literal"><span class="pre">uio</span></code> &#8211; input/output streams</a></li>
<li class="toctree-l3"><a class="reference internal" href="ujson.html"><code class="docutils literal"><span class="pre">ujson</span></code> &#8211; JSON encoding and decoding</a></li>
<li class="toctree-l3"><a class="reference internal" href="uos.html"><code class="docutils literal"><span class="pre">uos</span></code> &#8211; basic &#8220;operating system&#8221; services</a></li>
<li class="toctree-l3"><a class="reference internal" href="ure.html"><code class="docutils literal"><span class="pre">ure</span></code> &#8211; simple regular expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="uselect.html"><code class="docutils literal"><span class="pre">uselect</span></code> &#8211; wait for events on a set of streams</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">usocket</span></code> &#8211; socket module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#socket-address-format-s">Socket address format(s)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ustruct.html"><code class="docutils literal"><span class="pre">ustruct</span></code> &#8211; pack and unpack primitive data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="utime.html"><code class="docutils literal"><span class="pre">utime</span></code> &#8211; time related functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="uzlib.html"><code class="docutils literal"><span class="pre">uzlib</span></code> &#8211; zlib decompression</a></li>
<li class="toctree-l3"><a class="reference internal" href="_thread.html"><code class="docutils literal"><span class="pre">_thread</span></code> &#8211; multithreading support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">The MicroPython language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">MicroPython</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">MicroPython libraries</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">usocket</span></code> &#8211; socket module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/library/usocket.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-usocket">
<span id="usocket-socket-module"></span><h1><a class="reference internal" href="#module-usocket" title="usocket: socket module"><code class="xref py py-mod docutils literal"><span class="pre">usocket</span></code></a> &#8211; socket module<a class="headerlink" href="#module-usocket" title="Permalink to this headline">¶</a></h1>
<p><em>This module implements a subset of the corresponding</em> <a class="reference internal" href="../reference/glossary.html#term-cpython"><code class="xref any std std-term docutils literal"><span class="pre">CPython</span></code></a> <em>module,
as described below. For more information, refer to the original
CPython documentation:</em> <a class="reference external" href="http://docs.python.org/3.5/library/socket.html#module-socket" title="(in Python v3.5)"><code class="docutils literal"><span class="pre">socket</span></code></a>.</p>
<p>This module provides access to the BSD socket interface.</p>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">For efficiency and consistency, socket objects in MicroPython implement a <a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal"><span class="pre">stream</span></code></a>
(file-like) interface directly. In CPython, you need to convert a socket to
a file-like object using <a class="reference internal" href="#usocket.socket.makefile" title="usocket.socket.makefile"><code class="xref any py py-meth docutils literal"><span class="pre">makefile()</span></code></a> method. This method is still supported
by MicroPython (but is a no-op), so where compatibility with CPython matters,
be sure to use it.</p>
</div>
<div class="section" id="socket-address-format-s">
<h2>Socket address format(s)<a class="headerlink" href="#socket-address-format-s" title="Permalink to this headline">¶</a></h2>
<p>The native socket address format of the <code class="docutils literal"><span class="pre">usocket</span></code> module is an opaque data type
returned by <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo</span></code></a> function, which must be used to resolve textual address
(including numeric addresses):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sockaddr</span> <span class="o">=</span> <span class="n">usocket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s">&#39;www.micropython.org&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c"># You must use getaddrinfo() even for numeric addresses</span>
<span class="n">sockaddr</span> <span class="o">=</span> <span class="n">usocket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c"># Now you can use that address</span>
<span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo</span></code></a> is the most efficient (both in terms of memory and processing
power) and portable way to work with addresses.</p>
<p>However, <code class="docutils literal"><span class="pre">socket</span></code> module (note the difference with native MicroPython
<code class="docutils literal"><span class="pre">usocket</span></code> module described here) provides CPython-compatible way to specify
addresses using tuples, as described below. Note that depending on a
<a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>, <code class="docutils literal"><span class="pre">socket</span></code> module can be builtin or need to be
installed from <a class="reference internal" href="../reference/glossary.html#term-micropython-lib"><code class="xref any std std-term docutils literal"><span class="pre">micropython-lib</span></code></a> (as in the case of <a class="reference internal" href="../reference/glossary.html#term-micropython-unix-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">Unix</span> <span class="pre">port</span></code></a>),
and some ports still accept only numeric addresses in the tuple format,
and require to use <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo</span></code></a> function to resolve domain names.</p>
<p>Summing up:</p>
<ul class="simple">
<li>Always use <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo</span></code></a> when writing portable applications.</li>
<li>Tuple addresses described below can be used as a shortcut for
quick hacks and interactive use, if your port supports them.</li>
</ul>
<p>Tuple address format for <code class="docutils literal"><span class="pre">socket</span></code> module:</p>
<ul class="simple">
<li>IPv4: <em>(ipv4_address, port)</em>, where <em>ipv4_address</em> is a string with
dot-notation numeric IPv4 address, e.g. <code class="docutils literal"><span class="pre">&quot;8.8.8.8&quot;</span></code>, and <em>port</em> is and
integer port number in the range 1-65535. Note the domain names are not
accepted as <em>ipv4_address</em>, they should be resolved first using
<a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">usocket.getaddrinfo()</span></code></a>.</li>
<li>IPv6: <em>(ipv6_address, port, flowinfo, scopeid)</em>, where <em>ipv6_address</em>
is a string with colon-notation numeric IPv6 address, e.g. <code class="docutils literal"><span class="pre">&quot;2001:db8::1&quot;</span></code>,
and <em>port</em> is an integer port number in the range 1-65535. <em>flowinfo</em>
must be 0. <em>scopeid</em> is the interface scope identifier for link-local
addresses. Note the domain names are not accepted as <em>ipv6_address</em>,
they should be resolved first using <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">usocket.getaddrinfo()</span></code></a>. Availability
of IPv6 support depends on a <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>.</li>
</ul>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="usocket.socket">
<code class="descclassname">usocket.</code><code class="descname">socket</code><span class="sig-paren">(</span><em>af=AF_INET</em>, <em>type=SOCK_STREAM</em>, <em>proto=IPPROTO_TCP</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new socket using the given address family, socket type and
protocol number. Note that specifying <em>proto</em> in most cases is not
required (and not recommended, as some MicroPython ports may omit
<code class="docutils literal"><span class="pre">IPPROTO_*</span></code> constants). Instead, <em>type</em> argument will select needed
protocol automatically:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create STREAM TCP socket</span>
<span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="c"># Create DGRAM UDP socket</span>
<span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_DGRAM</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="usocket.getaddrinfo">
<code class="descclassname">usocket.</code><code class="descname">getaddrinfo</code><span class="sig-paren">(</span><em>host</em>, <em>port</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.getaddrinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate the host/port argument into a sequence of 5-tuples that contain all the
necessary arguments for creating a socket connected to that service. The list of
5-tuples has following structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="n">family</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">proto</span><span class="p">,</span> <span class="n">canonname</span><span class="p">,</span> <span class="n">sockaddr</span><span class="p">)</span>
</pre></div>
</div>
<p>The following example shows how to connect to a given url:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">usocket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">usocket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s">&#39;www.micropython.org&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">CPython raises a <code class="docutils literal"><span class="pre">socket.gaierror</span></code> exception (<a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal"><span class="pre">OSError</span></code></a> subclass) in case
of error in this function. MicroPython doesn&#8217;t have <code class="docutils literal"><span class="pre">socket.gaierror</span></code>
and raises OSError directly. Note that error numbers of <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo()</span></code></a>
form a separate namespace and may not match error numbers from
the <a class="reference internal" href="uerrno.html#module-uerrno" title="uerrno: system error codes"><code class="xref py py-mod docutils literal"><span class="pre">uerrno</span></code></a> module. To distinguish <a class="reference internal" href="#usocket.getaddrinfo" title="usocket.getaddrinfo"><code class="xref any py py-func docutils literal"><span class="pre">getaddrinfo()</span></code></a> errors, they are
represented by negative numbers, whereas standard system errors are
positive numbers (error numbers are accessible using <code class="docutils literal"><span class="pre">e.args[0]</span></code> property
from an exception object). The use of negative values is a provisional
detail which may change in the future.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="usocket.inet_ntop">
<code class="descclassname">usocket.</code><code class="descname">inet_ntop</code><span class="sig-paren">(</span><em>af</em>, <em>bin_addr</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.inet_ntop" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a binary network address <em>bin_addr</em> of the given address family <em>af</em>
to a textual representation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">usocket</span><span class="o">.</span><span class="n">inet_ntop</span><span class="p">(</span><span class="n">usocket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">b</span><span class="s">&quot;</span><span class="se">\x7f\0\0\1</span><span class="s">&quot;</span><span class="p">)</span>
<span class="go">&#39;127.0.0.1&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="usocket.inet_pton">
<code class="descclassname">usocket.</code><code class="descname">inet_pton</code><span class="sig-paren">(</span><em>af</em>, <em>txt_addr</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.inet_pton" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a textual network address <em>txt_addr</em> of the given address family <em>af</em>
to a binary representation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">usocket</span><span class="o">.</span><span class="n">inet_pton</span><span class="p">(</span><span class="n">usocket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="s">&quot;1.2.3.4&quot;</span><span class="p">)</span>
<span class="go">b&#39;\x01\x02\x03\x04&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="usocket.AF_INET">
<code class="descclassname">usocket.</code><code class="descname">AF_INET</code><a class="headerlink" href="#usocket.AF_INET" title="Permalink to this definition">¶</a></dt>
<dt id="usocket.AF_INET6">
<code class="descclassname">usocket.</code><code class="descname">AF_INET6</code><a class="headerlink" href="#usocket.AF_INET6" title="Permalink to this definition">¶</a></dt>
<dd><p>Address family types. Availability depends on a particular <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>.</p>
</dd></dl>

<dl class="data">
<dt id="usocket.SOCK_STREAM">
<code class="descclassname">usocket.</code><code class="descname">SOCK_STREAM</code><a class="headerlink" href="#usocket.SOCK_STREAM" title="Permalink to this definition">¶</a></dt>
<dt id="usocket.SOCK_DGRAM">
<code class="descclassname">usocket.</code><code class="descname">SOCK_DGRAM</code><a class="headerlink" href="#usocket.SOCK_DGRAM" title="Permalink to this definition">¶</a></dt>
<dd><p>Socket types.</p>
</dd></dl>

<dl class="data">
<dt id="usocket.IPPROTO_UDP">
<code class="descclassname">usocket.</code><code class="descname">IPPROTO_UDP</code><a class="headerlink" href="#usocket.IPPROTO_UDP" title="Permalink to this definition">¶</a></dt>
<dt id="usocket.IPPROTO_TCP">
<code class="descclassname">usocket.</code><code class="descname">IPPROTO_TCP</code><a class="headerlink" href="#usocket.IPPROTO_TCP" title="Permalink to this definition">¶</a></dt>
<dd><p>IP protocol numbers. Availability depends on a particular <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>.
Note that you don&#8217;t need to specify these in a call to <a class="reference internal" href="#usocket.socket" title="usocket.socket"><code class="xref any py py-func docutils literal"><span class="pre">usocket.socket()</span></code></a>,
because <a class="reference internal" href="#usocket.SOCK_STREAM" title="usocket.SOCK_STREAM"><code class="xref any py py-data docutils literal"><span class="pre">SOCK_STREAM</span></code></a> socket type automatically selects <a class="reference internal" href="#usocket.IPPROTO_TCP" title="usocket.IPPROTO_TCP"><code class="xref any py py-data docutils literal"><span class="pre">IPPROTO_TCP</span></code></a>, and
<a class="reference internal" href="#usocket.SOCK_DGRAM" title="usocket.SOCK_DGRAM"><code class="xref any py py-data docutils literal"><span class="pre">SOCK_DGRAM</span></code></a> - <a class="reference internal" href="#usocket.IPPROTO_UDP" title="usocket.IPPROTO_UDP"><code class="xref any py py-data docutils literal"><span class="pre">IPPROTO_UDP</span></code></a>. Thus, the only real use of these constants
is as an argument to <a class="reference internal" href="#usocket.socket.setsockopt" title="usocket.socket.setsockopt"><code class="xref any py py-meth docutils literal"><span class="pre">setsockopt()</span></code></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">usocket.SOL_*</code></dt>
<dd><p>Socket option levels (an argument to <a class="reference internal" href="#usocket.socket.setsockopt" title="usocket.socket.setsockopt"><code class="xref any py py-meth docutils literal"><span class="pre">setsockopt()</span></code></a>). The exact
inventory depends on a <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">usocket.SO_*</code></dt>
<dd><p>Socket options (an argument to <a class="reference internal" href="#usocket.socket.setsockopt" title="usocket.socket.setsockopt"><code class="xref any py py-meth docutils literal"><span class="pre">setsockopt()</span></code></a>). The exact
inventory depends on a <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a>.</p>
</dd></dl>

<div class="section" id="class-socket">
<h3>class socket<a class="headerlink" href="#class-socket" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="usocket.socket.close">
<code class="descclassname">socket.</code><code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the socket closed and release all resources. Once that happens, all future operations
on the socket object will fail. The remote end will receive EOF indication if
supported by protocol.</p>
<p>Sockets are automatically closed when they are garbage-collected, but it is recommended
to <a class="reference internal" href="#usocket.socket.close" title="usocket.socket.close"><code class="xref any py py-meth docutils literal"><span class="pre">close()</span></code></a> them explicitly as soon you finished working with them.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.bind">
<code class="descclassname">socket.</code><code class="descname">bind</code><span class="sig-paren">(</span><em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Bind the socket to <em>address</em>. The socket must not already be bound.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.listen">
<code class="descclassname">socket.</code><code class="descname">listen</code><span class="sig-paren">(</span><span class="optional">[</span><em>backlog</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.listen" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable a server to accept connections. If <em>backlog</em> is specified, it must be at least 0
(if it&#8217;s lower, it will be set to 0); and specifies the number of unaccepted connections
that the system will allow before refusing new connections. If not specified, a default
reasonable value is chosen.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.accept">
<code class="descclassname">socket.</code><code class="descname">accept</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.accept" title="Permalink to this definition">¶</a></dt>
<dd><p>Accept a connection. The socket must be bound to an address and listening for connections.
The return value is a pair (conn, address) where conn is a new socket object usable to send
and receive data on the connection, and address is the address bound to the socket on the
other end of the connection.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.connect">
<code class="descclassname">socket.</code><code class="descname">connect</code><span class="sig-paren">(</span><em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a remote socket at <em>address</em>.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.send">
<code class="descclassname">socket.</code><code class="descname">send</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send data to the socket. The socket must be connected to a remote socket.
Returns number of bytes sent, which may be smaller than the length of data
(&#8220;short write&#8221;).</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.sendall">
<code class="descclassname">socket.</code><code class="descname">sendall</code><span class="sig-paren">(</span><em>bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.sendall" title="Permalink to this definition">¶</a></dt>
<dd><p>Send all data to the socket. The socket must be connected to a remote socket.
Unlike <a class="reference internal" href="#usocket.socket.send" title="usocket.socket.send"><code class="xref any py py-meth docutils literal"><span class="pre">send()</span></code></a>, this method will try to send all of data, by sending data
chunk by chunk consecutively.</p>
<p>The behavior of this method on non-blocking sockets is undefined. Due to this,
on MicroPython, it&#8217;s recommended to use <a class="reference internal" href="#usocket.socket.write" title="usocket.socket.write"><code class="xref any py py-meth docutils literal"><span class="pre">write()</span></code></a> method instead, which
has the same &#8220;no short writes&#8221; policy for blocking sockets, and will return
number of bytes sent on non-blocking sockets.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.recv">
<code class="descclassname">socket.</code><code class="descname">recv</code><span class="sig-paren">(</span><em>bufsize</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.recv" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive data from the socket. The return value is a bytes object representing the data
received. The maximum amount of data to be received at once is specified by bufsize.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.sendto">
<code class="descclassname">socket.</code><code class="descname">sendto</code><span class="sig-paren">(</span><em>bytes</em>, <em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.sendto" title="Permalink to this definition">¶</a></dt>
<dd><p>Send data to the socket. The socket should not be connected to a remote socket, since the
destination socket is specified by <em>address</em>.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.recvfrom">
<code class="descclassname">socket.</code><code class="descname">recvfrom</code><span class="sig-paren">(</span><em>bufsize</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.recvfrom" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive data from the socket. The return value is a pair <em>(bytes, address)</em> where <em>bytes</em> is a
bytes object representing the data received and <em>address</em> is the address of the socket sending
the data.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.setsockopt">
<code class="descclassname">socket.</code><code class="descname">setsockopt</code><span class="sig-paren">(</span><em>level</em>, <em>optname</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.setsockopt" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the given socket option. The needed symbolic constants are defined in the
socket module (SO_* etc.). The <em>value</em> can be an integer or a bytes-like object representing
a buffer.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.settimeout">
<code class="descclassname">socket.</code><code class="descname">settimeout</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.settimeout" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Note</strong>: Not every port supports this method, see below.</p>
<p>Set a timeout on blocking socket operations. The value argument can be a nonnegative floating
point number expressing seconds, or None. If a non-zero value is given, subsequent socket operations
will raise an <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal"><span class="pre">OSError</span></code></a> exception if the timeout period value has elapsed before the operation has
completed. If zero is given, the socket is put in non-blocking mode. If None is given, the socket
is put in blocking mode.</p>
<p>Not every <a class="reference internal" href="../reference/glossary.html#term-micropython-port"><code class="xref any std std-term docutils literal"><span class="pre">MicroPython</span> <span class="pre">port</span></code></a> supports this method. A more portable and
generic solution is to use <a class="reference internal" href="uselect.html#uselect.poll" title="uselect.poll"><code class="xref any py py-func docutils literal"><span class="pre">uselect.poll</span></code></a> object. This allows to wait on
multiple objects at the same time (and not just on sockets, but on generic
<a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal"><span class="pre">stream</span></code></a> objects which support polling). Example:</p>
<div class="highlight-python"><div class="highlight"><pre># Instead of:
s.settimeout(1.0)  # time in seconds
s.read(10)  # may timeout

# Use:
poller = uselect.poll()
poller.register(s, uselect.POLLIN)
res = poller.poll(1000)  # time in milliseconds
if not res:
    # s is still not ready for input, i.e. operation timed out
</pre></div>
</div>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">CPython raises a <code class="docutils literal"><span class="pre">socket.timeout</span></code> exception in case of timeout,
which is an <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal"><span class="pre">OSError</span></code></a> subclass. MicroPython raises an OSError directly
instead. If you use <code class="docutils literal"><span class="pre">except</span> <span class="pre">OSError:</span></code> to catch the exception,
your code will work both in MicroPython and CPython.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.setblocking">
<code class="descclassname">socket.</code><code class="descname">setblocking</code><span class="sig-paren">(</span><em>flag</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.setblocking" title="Permalink to this definition">¶</a></dt>
<dd><p>Set blocking or non-blocking mode of the socket: if flag is false, the socket is set to non-blocking,
else to blocking mode.</p>
<p>This method is a shorthand for certain <a class="reference internal" href="#usocket.socket.settimeout" title="usocket.socket.settimeout"><code class="xref any py py-meth docutils literal"><span class="pre">settimeout()</span></code></a> calls:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sock.setblocking(True)</span></code> is equivalent to <code class="docutils literal"><span class="pre">sock.settimeout(None)</span></code></li>
<li><code class="docutils literal"><span class="pre">sock.setblocking(False)</span></code> is equivalent to <code class="docutils literal"><span class="pre">sock.settimeout(0)</span></code></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.makefile">
<code class="descclassname">socket.</code><code class="descname">makefile</code><span class="sig-paren">(</span><em>mode='rb'</em>, <em>buffering=0</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.makefile" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a file object associated with the socket. The exact returned type depends on the arguments
given to makefile(). The support is limited to binary modes only (&#8216;rb&#8217;, &#8216;wb&#8217;, and &#8216;rwb&#8217;).
CPython&#8217;s arguments: <em>encoding</em>, <em>errors</em> and <em>newline</em> are not supported.</p>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">As MicroPython doesn&#8217;t support buffered streams, values of <em>buffering</em>
parameter is ignored and treated as if it was 0 (unbuffered).</p>
</div>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">Closing the file object returned by makefile() WILL close the
original socket as well.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.read">
<code class="descclassname">socket.</code><code class="descname">read</code><span class="sig-paren">(</span><span class="optional">[</span><em>size</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read up to size bytes from the socket. Return a bytes object. If <em>size</em> is not given, it
reads all data available from the socket until EOF; as such the method will not return until
the socket is closed. This function tries to read as much data as
requested (no &#8220;short reads&#8221;). This may be not possible with
non-blocking socket though, and then less data will be returned.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.readinto">
<code class="descclassname">socket.</code><code class="descname">readinto</code><span class="sig-paren">(</span><em>buf</em><span class="optional">[</span>, <em>nbytes</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Read bytes into the <em>buf</em>.  If <em>nbytes</em> is specified then read at most
that many bytes.  Otherwise, read at most <em>len(buf)</em> bytes. Just as
<a class="reference internal" href="#usocket.socket.read" title="usocket.socket.read"><code class="xref any py py-meth docutils literal"><span class="pre">read()</span></code></a>, this method follows &#8220;no short reads&#8221; policy.</p>
<p>Return value: number of bytes read and stored into <em>buf</em>.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.readline">
<code class="descclassname">socket.</code><code class="descname">readline</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a line, ending in a newline character.</p>
<p>Return value: the line read.</p>
</dd></dl>

<dl class="method">
<dt id="usocket.socket.write">
<code class="descclassname">socket.</code><code class="descname">write</code><span class="sig-paren">(</span><em>buf</em><span class="sig-paren">)</span><a class="headerlink" href="#usocket.socket.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the buffer of bytes to the socket. This function will try to
write all data to a socket (no &#8220;short writes&#8221;). This may be not possible
with a non-blocking socket though, and returned value will be less than
the length of <em>buf</em>.</p>
<p>Return value: number of bytes written.</p>
</dd></dl>

<dl class="exception">
<dt id="usocket.usocket.error">
<em class="property">exception </em><code class="descclassname">usocket.</code><code class="descname">error</code><a class="headerlink" href="#usocket.usocket.error" title="Permalink to this definition">¶</a></dt>
<dd><p>MicroPython does NOT have this exception.</p>
<div class="attention admonition">
<p class="first admonition-title">Difference to CPython</p>
<p class="last">CPython used to have a <code class="docutils literal"><span class="pre">socket.error</span></code> exception which is now deprecated,
and is an alias of <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal"><span class="pre">OSError</span></code></a>. In MicroPython, use <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal"><span class="pre">OSError</span></code></a> directly.</p>
</div>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ustruct.html" class="btn btn-neutral float-right" title="ustruct – pack and unpack primitive data types" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="uselect.html" class="btn btn-neutral" title="uselect – wait for events on a set of streams" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2019, Damien P. George, Paul Sokolovsky, OpenMV LLC, and contributors.
      Last updated on 31 Mar 2019.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Ports and Versions</span>
    openmvcam (latest)
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <!--p>
    <dl>
      <dt>Ports</dt>
      
        <dd><a href="//en/latest/unix">unix</a></dd>
      
        <dd><a href="//en/latest/pyboard">pyboard</a></dd>
      
        <dd><a href="//en/latest/wipy">wipy</a></dd>
      
        <dd><a href="//en/latest/esp8266">esp8266</a></dd>
      
        <dd><a href="//en/latest/openmvcam">openmvcam</a></dd>
      
    </dl>
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="//en/latest/openmvcam">latest</a></dd>
      
    </dl>
    <dl>
      <dt>Downloads</dt>
      
        <dd><a href="//en/latest/micropython-openmvcam.pdf">PDF</a></dd>
      
    </dl>
    </p-->
    <dl>
        <dt>Language</dt>
        
          <dd><a href="http://docs.openmv.io">English</a></dd>
        
          <dd><a href="http://doc.singtown.cc/openmv_zh">中文</a></dd>
        
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
        <dd>
          <a href="https://openmv.io">openmv.io</a>
        </dd>
        <dd>
          <a href="http://forums.openmv.io">forums.openmv.io</a>
        </dd>
        <dd>
          <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
        </dd>
        <dd>
          <a href="http://micropython.org">micropython.org</a>
        </dd>
        <dd>
          <a href="http://forum.micropython.org">forum.micropython.org</a>
        </dd>
        <dd>
          <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
        </dd>
    </dl>
  </div>
</div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.9.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>